/* Wrapper handles position, inner dot handles centering */
.noteDotWrapper {
  position: absolute;
  z-index: 20;
  pointer-events: auto;
  cursor: grab;
  /* Offset by half the dot size to center on position */
  margin-left: -8px;
  margin-top: -8px;
}

.noteDotWrapper.dragging {
  cursor: grabbing;
  z-index: 100;
}

.noteDot {
  width: 16px;
  height: 16px;
  border-radius: 50%;
  /* GPU-accelerated properties: transform and opacity only */
  transition: transform var(--duration-fast, 200ms) var(--ease-breathe),
              opacity var(--duration-fast, 200ms) var(--ease-breathe);
  will-change: transform, opacity;
  /* Default: hollow style for non-chord tones */
  background-color: transparent;
  border: 2.5px solid currentColor;
}

/* Chord tones are filled */
.noteDot.chordTone {
  background-color: currentColor;
}

/* Non-chord tones stay hollow with solid border */
.noteDot.nonChordTone {
  background-color: transparent;
}

.noteDotWrapper:hover .noteDot {
  transform: scale(1.15);
}

.noteDot.selected {
  background-color: currentColor;
  box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.8), 0 0 12px 2px currentColor;
}

/* Chromatic visual cues - sharps get light interior, flats get dark interior */
.noteDot.sharp {
  background-color: rgba(255, 255, 255, 0.35);
  box-shadow: 0 0 8px 2px rgba(255, 215, 0, 0.5);
}

.noteDot.sharp.chordTone {
  /* For filled chord tones with sharp, lighten the fill */
  background-color: currentColor;
  box-shadow: 0 0 8px 2px rgba(255, 215, 0, 0.5), inset 0 0 6px rgba(255, 255, 255, 0.5);
}

.noteDot.flat {
  background-color: rgba(0, 0, 0, 0.2);
  box-shadow: 0 0 6px 2px rgba(100, 80, 120, 0.3);
}

.noteDot.flat.chordTone {
  /* For filled chord tones with flat, darken the fill */
  background-color: currentColor;
  box-shadow: 0 0 6px 2px rgba(100, 80, 120, 0.3), inset 0 0 6px rgba(0, 0, 0, 0.3);
}

.noteDot.playing {
  background-color: currentColor;
  animation: notePulse 0.4s var(--ease-breathe);
}

@keyframes notePulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.4); }
}

.tooltip {
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%);
  padding: 2px 6px;
  background: var(--warm-text-primary, #3D3530);
  color: white;
  font-size: 10px;
  font-family: var(--font-mono);
  border-radius: 4px;
  white-space: nowrap;
  pointer-events: none;
  opacity: 0;
  transition: opacity var(--duration-fast, 200ms);
}

.noteDot:hover .tooltip {
  opacity: 1;
}

/* Non-chord tone type badge */
.nctBadge {
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translateX(-50%);
  margin-top: 2px;
  padding: 1px 3px;
  background: rgba(255, 255, 255, 0.95);
  color: var(--warm-text-secondary, #6B6156);
  font-size: 8px;
  font-family: var(--font-mono);
  font-weight: 600;
  border-radius: 2px;
  white-space: nowrap;
  pointer-events: none;
  text-transform: uppercase;
  letter-spacing: 0.3px;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

/* Lyric/syllable text below note */
.lyricText {
  position: absolute;
  top: calc(100% + 18px);
  left: 50%;
  transform: translateX(-50%);
  font-size: 11px;
  font-family: var(--font-serif, Georgia, serif);
  font-style: italic;
  color: var(--warm-text-primary, #3D3530);
  white-space: nowrap;
  pointer-events: none;
  text-align: center;
  max-width: 60px;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Inline lyric input */
.lyricInput {
  position: absolute;
  top: calc(100% + 14px);
  left: 50%;
  transform: translateX(-50%);
  width: 60px;
  padding: 2px 4px;
  font-size: 11px;
  font-family: var(--font-serif, Georgia, serif);
  font-style: italic;
  color: var(--warm-text-primary, #3D3530);
  background: white;
  border: 1px solid var(--warm-gold, #B8860B);
  border-radius: 3px;
  text-align: center;
  outline: none;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
  z-index: 200;
}

.lyricInput:focus {
  border-color: var(--warm-terracotta, #C17F59);
  box-shadow: 0 0 0 2px rgba(193, 127, 89, 0.2), 0 2px 8px rgba(0, 0, 0, 0.15);
}

.lyricInput::placeholder {
  color: var(--warm-text-tertiary, #9E958C);
  font-style: italic;
}
